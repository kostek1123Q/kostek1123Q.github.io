<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GlobalChatPL</title>
  <meta name="description" content="Global Chat PL – Najlepsze miesce do czatowania w polsce">
  <meta name="keywords" content="GlobalChatPL, czat online, chat PL, rozmowy, globalchat, global, pl, chat, gcpl">
  <meta name="robots" content="index, follow">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="chat-wrapper">
    <div id="messages" class="messages"></div>

    <div class="form-section">
      <div class="input-area">
        <textarea id="message" placeholder="Wpisz wiadomość..." maxlength="200"></textarea>
        <button id="sendBtn">➤</button>
      </div>

      <div class="settings">
        <label>Nick:</label>
        <input type="text" id="nick" maxlength="20" placeholder="Anonim" />

        <label>Hasło:</label>
        <input type="password" id="password" maxlength="20" placeholder="Twoje hasło" />

        <label>Kolor:</label>
        <input type="color" id="color" value="#1e40af" />

        <label>Awatar:</label>
        <input type="file" id="avatar" accept="image/*" />
      </div>
    </div>

    <div class="active-users">
  Aktywni użytkownicy: <span id="activeCount">0</span>
</div>

    <div class="commands-list">
      <h3>Lista komend:</h3>
      <ul>
        <li><b>/lightmode</b> – włącza lightmode</li>
        <li><b>/pastelmode</b> – włącza pastelmode</li>
        <li><b>/cutemode</b> – włącza cutemode</li>
        <li><b>GlobalChatPL™</b> – dziękujemy za korzystanie z GlobalChat!</li>
      </ul>
    </div>
  </div>

  <div class="wiadomosci">
    <h2>Wyślij wiadomość do właściciela strony. [OFF]</h2>
    <label for="nickpv">Twój nick:</label>
    <input type="text" id="nickpv" placeholder="np. użytkownik">

    <label for="messagepv">Wiadomość:</label>
    <textarea id="messagepv" placeholder="Wpisz wiadomość..."></textarea>

    <button onclick="sendMessage()">Wyślij</button>
    <div class="status" id="status"></div>
  </div>

  <script>
    const webhookURL = 'https://discord.com/api/webhooks/1422535677471363083/2RDfGmuanKxaOzf0zzVCgK3YZmwFLfxiAWncfYBoke9S2cEj1AH1pd1K4QzDJ9ZEiFz7';
    let canSend = true;

    function sendMessage() {
      const nickpv = document.getElementById('nickpv').value.trim() || 'Anonim';
      const messagepv = document.getElementById('messagepv').value.trim();
      const status = document.getElementById('status');

      if (!messagepv) {
        status.textContent = 'Wiadomość nie może być pusta.';
        status.style.color = 'orange';
        return;
      }

      if (!canSend) {
        status.textContent = 'Poczekaj chwilę przed kolejnym wysłaniem (120s).';
        status.style.color = 'orange';
        return;
      }

      const content = `**${nickpv}** napisał:\n${messagepv}`;

      fetch(webhookURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content })
      })
      .then(response => {
        if (response.ok) {
          status.textContent = 'Wiadomość została wysłana!';
          status.style.color = 'lightgreen';
          document.getElementById('messagepv').value = '';
          canSend = false;
          setTimeout(() => {
            canSend = true;
            status.textContent = '';
          }, 120000);
        } else {
          status.textContent = 'Błąd podczas wysyłania wiadomości.';
          status.style.color = 'red';
        }
      })
      .catch(error => {
        status.textContent = 'Nie udało się połączyć z webhookiem.';
        status.style.color = 'red';
      });
    }
  </script>

  <!-- Twój chat.js -->
  <script src="script.js" defer></script>
</body>
</html>
